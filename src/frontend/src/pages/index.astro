---
import Layout from '../layouts/Layout.astro';

const result = await fetch(import.meta.env.API_BASE_PATH + "ebooks");
const data = await result.json();

---

<Layout title="List of books">
	<main>
    <div class="overflow-x-auto rounded-lg border border-gray-200">
      <table class="min-w-full divide-y-2 divide-gray-200 bg-white text-sm">
        <thead class="ltr:text-left">
          <tr>
            <th class="whitespace-nowrap px-4 py-2 font-medium text-gray-900">Name</th>
            <th class="px-4 py-2"></th>
          </tr>
        </thead>

        <tbody class="divide-y divide-gray-200">
          {
            data.map((book: any) => (
            <tr>
            <td class="whitespace-nowrap px-4 py-2 font-medium text-gray-900">{book.name}</td>
            <td class="whitespace-nowrap px-4 py-2">
              <a
                href={book.href}
                class="inline-block rounded bg-indigo-600 px-4 py-2 text-xs font-medium text-white hover:bg-indigo-700">
                View
              </a>
            </td>
          </tr>

            ))
          }
        </tbody>
      </table>
    </div>
	</main>
</Layout>
